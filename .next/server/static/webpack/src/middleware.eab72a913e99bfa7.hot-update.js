"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("src/middleware",{

/***/ "(middleware)/./src/middleware.ts":
/*!***************************!*\
  !*** ./src/middleware.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/ssr */ \"(middleware)/./node_modules/@supabase/ssr/dist/module/index.js\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n\n\nasync function middleware(request) {\n    let supabaseResponse = next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.next({\n        request\n    });\n    const supabase = (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(\"\", process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY, {\n        cookies: {\n            getAll () {\n                return request.cookies.getAll();\n            },\n            setAll (cookiesToSet) {\n                cookiesToSet.forEach(({ name, value })=>request.cookies.set(name, value));\n                supabaseResponse = next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.next({\n                    request\n                });\n                cookiesToSet.forEach(({ name, value, options })=>supabaseResponse.cookies.set(name, value, options));\n            }\n        }\n    });\n    const { data: { user } } = await supabase.auth.getUser();\n    const isDashboardRoute = request.nextUrl.pathname.startsWith(\"/dashboard\") || request.nextUrl.pathname.startsWith(\"/vehicles\") || request.nextUrl.pathname.startsWith(\"/trips\") || request.nextUrl.pathname.startsWith(\"/maintenance\") || request.nextUrl.pathname.startsWith(\"/expenses\") || request.nextUrl.pathname.startsWith(\"/drivers\") || request.nextUrl.pathname.startsWith(\"/analytics\");\n    if (!user && isDashboardRoute) {\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(new URL(\"/login\", request.url));\n    }\n    if (user && request.nextUrl.pathname === \"/login\") {\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(new URL(\"/dashboard\", request.url));\n    }\n    return supabaseResponse;\n}\nconst config = {\n    matcher: [\n        \"/((?!_next/static|_next/image|favicon.ico|api).*)\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vc3JjL21pZGRsZXdhcmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFtRDtBQUNVO0FBRXRELGVBQWVFLFdBQVdDLE9BQW9CO0lBQ25ELElBQUlDLG1CQUFtQkgscURBQVlBLENBQUNJLElBQUksQ0FBQztRQUFFRjtJQUFRO0lBRW5ELE1BQU1HLFdBQVdOLGlFQUFrQkEsQ0FDakNPLEVBQW9DLEVBQ3BDQSxRQUFRQyxHQUFHLENBQUNFLDZCQUE2QixFQUN6QztRQUNFQyxTQUFTO1lBQ1BDO2dCQUNFLE9BQU9ULFFBQVFRLE9BQU8sQ0FBQ0MsTUFBTTtZQUMvQjtZQUNBQyxRQUFPQyxZQUE4RDtnQkFDbkVBLGFBQWFDLE9BQU8sQ0FDbEIsQ0FBQyxFQUFFQyxJQUFJLEVBQUVDLEtBQUssRUFBbUMsR0FDL0NkLFFBQVFRLE9BQU8sQ0FBQ08sR0FBRyxDQUFDRixNQUFNQztnQkFFOUJiLG1CQUFtQkgscURBQVlBLENBQUNJLElBQUksQ0FBQztvQkFBRUY7Z0JBQVE7Z0JBQy9DVyxhQUFhQyxPQUFPLENBQ2xCLENBQUMsRUFDQ0MsSUFBSSxFQUNKQyxLQUFLLEVBQ0xFLE9BQU8sRUFLUixHQUFLZixpQkFBaUJPLE9BQU8sQ0FBQ08sR0FBRyxDQUFDRixNQUFNQyxPQUFPRTtZQUVwRDtRQUNGO0lBQ0Y7SUFHRixNQUFNLEVBQ0pDLE1BQU0sRUFBRUMsSUFBSSxFQUFFLEVBQ2YsR0FBRyxNQUFNZixTQUFTZ0IsSUFBSSxDQUFDQyxPQUFPO0lBRS9CLE1BQU1DLG1CQUNKckIsUUFBUXNCLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDQyxVQUFVLENBQUMsaUJBQ3BDeEIsUUFBUXNCLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDQyxVQUFVLENBQUMsZ0JBQ3BDeEIsUUFBUXNCLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDQyxVQUFVLENBQUMsYUFDcEN4QixRQUFRc0IsT0FBTyxDQUFDQyxRQUFRLENBQUNDLFVBQVUsQ0FBQyxtQkFDcEN4QixRQUFRc0IsT0FBTyxDQUFDQyxRQUFRLENBQUNDLFVBQVUsQ0FBQyxnQkFDcEN4QixRQUFRc0IsT0FBTyxDQUFDQyxRQUFRLENBQUNDLFVBQVUsQ0FBQyxlQUNwQ3hCLFFBQVFzQixPQUFPLENBQUNDLFFBQVEsQ0FBQ0MsVUFBVSxDQUFDO0lBRXRDLElBQUksQ0FBQ04sUUFBUUcsa0JBQWtCO1FBQzdCLE9BQU92QixxREFBWUEsQ0FBQzJCLFFBQVEsQ0FBQyxJQUFJQyxJQUFJLFVBQVUxQixRQUFRMkIsR0FBRztJQUM1RDtJQUVBLElBQUlULFFBQVFsQixRQUFRc0IsT0FBTyxDQUFDQyxRQUFRLEtBQUssVUFBVTtRQUNqRCxPQUFPekIscURBQVlBLENBQUMyQixRQUFRLENBQUMsSUFBSUMsSUFBSSxjQUFjMUIsUUFBUTJCLEdBQUc7SUFDaEU7SUFFQSxPQUFPMUI7QUFDVDtBQUVPLE1BQU0yQixTQUFTO0lBQ3BCQyxTQUFTO1FBQUM7S0FBb0Q7QUFDaEUsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvbWlkZGxld2FyZS50cz9kMTk5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVNlcnZlckNsaWVudCB9IGZyb20gXCJAc3VwYWJhc2Uvc3NyXCI7XHJcbmltcG9ydCB7IE5leHRSZXNwb25zZSwgdHlwZSBOZXh0UmVxdWVzdCB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1pZGRsZXdhcmUocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICBsZXQgc3VwYWJhc2VSZXNwb25zZSA9IE5leHRSZXNwb25zZS5uZXh0KHsgcmVxdWVzdCB9KTtcclxuXHJcbiAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVTZXJ2ZXJDbGllbnQoXHJcbiAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhLFxyXG4gICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkhLFxyXG4gICAge1xyXG4gICAgICBjb29raWVzOiB7XHJcbiAgICAgICAgZ2V0QWxsKCkge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcXVlc3QuY29va2llcy5nZXRBbGwoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldEFsbChjb29raWVzVG9TZXQ6IHsgbmFtZTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nOyBvcHRpb25zPzogYW55IH1bXSkge1xyXG4gICAgICAgICAgY29va2llc1RvU2V0LmZvckVhY2goXHJcbiAgICAgICAgICAgICh7IG5hbWUsIHZhbHVlIH06IHsgbmFtZTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH0pID0+XHJcbiAgICAgICAgICAgICAgcmVxdWVzdC5jb29raWVzLnNldChuYW1lLCB2YWx1ZSksXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgc3VwYWJhc2VSZXNwb25zZSA9IE5leHRSZXNwb25zZS5uZXh0KHsgcmVxdWVzdCB9KTtcclxuICAgICAgICAgIGNvb2tpZXNUb1NldC5mb3JFYWNoKFxyXG4gICAgICAgICAgICAoe1xyXG4gICAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgICAgICAgb3B0aW9ucyxcclxuICAgICAgICAgICAgfToge1xyXG4gICAgICAgICAgICAgIG5hbWU6IHN0cmluZztcclxuICAgICAgICAgICAgICB2YWx1ZTogc3RyaW5nO1xyXG4gICAgICAgICAgICAgIG9wdGlvbnM/OiBhbnk7XHJcbiAgICAgICAgICAgIH0pID0+IHN1cGFiYXNlUmVzcG9uc2UuY29va2llcy5zZXQobmFtZSwgdmFsdWUsIG9wdGlvbnMpLFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICApO1xyXG5cclxuICBjb25zdCB7XHJcbiAgICBkYXRhOiB7IHVzZXIgfSxcclxuICB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRVc2VyKCk7XHJcblxyXG4gIGNvbnN0IGlzRGFzaGJvYXJkUm91dGUgPVxyXG4gICAgcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgoXCIvZGFzaGJvYXJkXCIpIHx8XHJcbiAgICByZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUuc3RhcnRzV2l0aChcIi92ZWhpY2xlc1wiKSB8fFxyXG4gICAgcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgoXCIvdHJpcHNcIikgfHxcclxuICAgIHJlcXVlc3QubmV4dFVybC5wYXRobmFtZS5zdGFydHNXaXRoKFwiL21haW50ZW5hbmNlXCIpIHx8XHJcbiAgICByZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUuc3RhcnRzV2l0aChcIi9leHBlbnNlc1wiKSB8fFxyXG4gICAgcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgoXCIvZHJpdmVyc1wiKSB8fFxyXG4gICAgcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgoXCIvYW5hbHl0aWNzXCIpO1xyXG5cclxuICBpZiAoIXVzZXIgJiYgaXNEYXNoYm9hcmRSb3V0ZSkge1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKFwiL2xvZ2luXCIsIHJlcXVlc3QudXJsKSk7XHJcbiAgfVxyXG5cclxuICBpZiAodXNlciAmJiByZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUgPT09IFwiL2xvZ2luXCIpIHtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTChcIi9kYXNoYm9hcmRcIiwgcmVxdWVzdC51cmwpKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBzdXBhYmFzZVJlc3BvbnNlO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xyXG4gIG1hdGNoZXI6IFtcIi8oKD8hX25leHQvc3RhdGljfF9uZXh0L2ltYWdlfGZhdmljb24uaWNvfGFwaSkuKilcIl0sXHJcbn07XHJcbiJdLCJuYW1lcyI6WyJjcmVhdGVTZXJ2ZXJDbGllbnQiLCJOZXh0UmVzcG9uc2UiLCJtaWRkbGV3YXJlIiwicmVxdWVzdCIsInN1cGFiYXNlUmVzcG9uc2UiLCJuZXh0Iiwic3VwYWJhc2UiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJjb29raWVzIiwiZ2V0QWxsIiwic2V0QWxsIiwiY29va2llc1RvU2V0IiwiZm9yRWFjaCIsIm5hbWUiLCJ2YWx1ZSIsInNldCIsIm9wdGlvbnMiLCJkYXRhIiwidXNlciIsImF1dGgiLCJnZXRVc2VyIiwiaXNEYXNoYm9hcmRSb3V0ZSIsIm5leHRVcmwiLCJwYXRobmFtZSIsInN0YXJ0c1dpdGgiLCJyZWRpcmVjdCIsIlVSTCIsInVybCIsImNvbmZpZyIsIm1hdGNoZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./src/middleware.ts\n");

/***/ })

});