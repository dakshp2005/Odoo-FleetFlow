"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("src/middleware",{

/***/ "(middleware)/./src/middleware.ts":
/*!***************************!*\
  !*** ./src/middleware.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/ssr */ \"(middleware)/./node_modules/@supabase/ssr/dist/module/index.js\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n\n\nasync function middleware(request) {\n    let supabaseResponse = next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.next({\n        request\n    });\n    const supabase = (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(\"https://kqqazfyatcapulqgxuto.supabase.co\", \"\", {\n        cookies: {\n            getAll () {\n                return request.cookies.getAll();\n            },\n            setAll (cookiesToSet) {\n                cookiesToSet.forEach(({ name, value })=>request.cookies.set(name, value));\n                supabaseResponse = next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.next({\n                    request\n                });\n                cookiesToSet.forEach(({ name, value, options })=>supabaseResponse.cookies.set(name, value, options));\n            }\n        }\n    });\n    const { data: { user } } = await supabase.auth.getUser();\n    const isDashboardRoute = request.nextUrl.pathname.startsWith(\"/dashboard\") || request.nextUrl.pathname.startsWith(\"/vehicles\") || request.nextUrl.pathname.startsWith(\"/trips\") || request.nextUrl.pathname.startsWith(\"/maintenance\") || request.nextUrl.pathname.startsWith(\"/expenses\") || request.nextUrl.pathname.startsWith(\"/drivers\") || request.nextUrl.pathname.startsWith(\"/analytics\");\n    if (!user && isDashboardRoute) {\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(new URL(\"/login\", request.url));\n    }\n    if (user && request.nextUrl.pathname === \"/login\") {\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(new URL(\"/dashboard\", request.url));\n    }\n    return supabaseResponse;\n}\nconst config = {\n    matcher: [\n        \"/((?!_next/static|_next/image|favicon.ico|api).*)\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vc3JjL21pZGRsZXdhcmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFtRDtBQUNVO0FBRXRELGVBQWVFLFdBQVdDLE9BQW9CO0lBQ25ELElBQUlDLG1CQUFtQkgscURBQVlBLENBQUNJLElBQUksQ0FBQztRQUFFRjtJQUFRO0lBRW5ELE1BQU1HLFdBQVdOLGlFQUFrQkEsQ0FDakNPLDBDQUFvQyxFQUNwQ0EsRUFBeUMsRUFDekM7UUFDRUksU0FBUztZQUNQQztnQkFDRSxPQUFPVCxRQUFRUSxPQUFPLENBQUNDLE1BQU07WUFDL0I7WUFDQUMsUUFBT0MsWUFBOEQ7Z0JBQ25FQSxhQUFhQyxPQUFPLENBQ2xCLENBQUMsRUFBRUMsSUFBSSxFQUFFQyxLQUFLLEVBQW1DLEdBQy9DZCxRQUFRUSxPQUFPLENBQUNPLEdBQUcsQ0FBQ0YsTUFBTUM7Z0JBRTlCYixtQkFBbUJILHFEQUFZQSxDQUFDSSxJQUFJLENBQUM7b0JBQUVGO2dCQUFRO2dCQUMvQ1csYUFBYUMsT0FBTyxDQUNsQixDQUFDLEVBQ0NDLElBQUksRUFDSkMsS0FBSyxFQUNMRSxPQUFPLEVBS1IsR0FBS2YsaUJBQWlCTyxPQUFPLENBQUNPLEdBQUcsQ0FBQ0YsTUFBTUMsT0FBT0U7WUFFcEQ7UUFDRjtJQUNGO0lBR0YsTUFBTSxFQUNKQyxNQUFNLEVBQUVDLElBQUksRUFBRSxFQUNmLEdBQUcsTUFBTWYsU0FBU2dCLElBQUksQ0FBQ0MsT0FBTztJQUUvQixNQUFNQyxtQkFDSnJCLFFBQVFzQixPQUFPLENBQUNDLFFBQVEsQ0FBQ0MsVUFBVSxDQUFDLGlCQUNwQ3hCLFFBQVFzQixPQUFPLENBQUNDLFFBQVEsQ0FBQ0MsVUFBVSxDQUFDLGdCQUNwQ3hCLFFBQVFzQixPQUFPLENBQUNDLFFBQVEsQ0FBQ0MsVUFBVSxDQUFDLGFBQ3BDeEIsUUFBUXNCLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDQyxVQUFVLENBQUMsbUJBQ3BDeEIsUUFBUXNCLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDQyxVQUFVLENBQUMsZ0JBQ3BDeEIsUUFBUXNCLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDQyxVQUFVLENBQUMsZUFDcEN4QixRQUFRc0IsT0FBTyxDQUFDQyxRQUFRLENBQUNDLFVBQVUsQ0FBQztJQUV0QyxJQUFJLENBQUNOLFFBQVFHLGtCQUFrQjtRQUM3QixPQUFPdkIscURBQVlBLENBQUMyQixRQUFRLENBQUMsSUFBSUMsSUFBSSxVQUFVMUIsUUFBUTJCLEdBQUc7SUFDNUQ7SUFFQSxJQUFJVCxRQUFRbEIsUUFBUXNCLE9BQU8sQ0FBQ0MsUUFBUSxLQUFLLFVBQVU7UUFDakQsT0FBT3pCLHFEQUFZQSxDQUFDMkIsUUFBUSxDQUFDLElBQUlDLElBQUksY0FBYzFCLFFBQVEyQixHQUFHO0lBQ2hFO0lBRUEsT0FBTzFCO0FBQ1Q7QUFFTyxNQUFNMkIsU0FBUztJQUNwQkMsU0FBUztRQUFDO0tBQW9EO0FBQ2hFLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL21pZGRsZXdhcmUudHM/ZDE5OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVTZXJ2ZXJDbGllbnQgfSBmcm9tIFwiQHN1cGFiYXNlL3NzclwiO1xyXG5pbXBvcnQgeyBOZXh0UmVzcG9uc2UsIHR5cGUgTmV4dFJlcXVlc3QgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtaWRkbGV3YXJlKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgbGV0IHN1cGFiYXNlUmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UubmV4dCh7IHJlcXVlc3QgfSk7XHJcblxyXG4gIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlU2VydmVyQ2xpZW50KFxyXG4gICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMISxcclxuICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZISxcclxuICAgIHtcclxuICAgICAgY29va2llczoge1xyXG4gICAgICAgIGdldEFsbCgpIHtcclxuICAgICAgICAgIHJldHVybiByZXF1ZXN0LmNvb2tpZXMuZ2V0QWxsKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXRBbGwoY29va2llc1RvU2V0OiB7IG5hbWU6IHN0cmluZzsgdmFsdWU6IHN0cmluZzsgb3B0aW9ucz86IGFueSB9W10pIHtcclxuICAgICAgICAgIGNvb2tpZXNUb1NldC5mb3JFYWNoKFxyXG4gICAgICAgICAgICAoeyBuYW1lLCB2YWx1ZSB9OiB7IG5hbWU6IHN0cmluZzsgdmFsdWU6IHN0cmluZyB9KSA9PlxyXG4gICAgICAgICAgICAgIHJlcXVlc3QuY29va2llcy5zZXQobmFtZSwgdmFsdWUpLFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIHN1cGFiYXNlUmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UubmV4dCh7IHJlcXVlc3QgfSk7XHJcbiAgICAgICAgICBjb29raWVzVG9TZXQuZm9yRWFjaChcclxuICAgICAgICAgICAgKHtcclxuICAgICAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgICAgIG9wdGlvbnMsXHJcbiAgICAgICAgICAgIH06IHtcclxuICAgICAgICAgICAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICAgICAgICAgICAgdmFsdWU6IHN0cmluZztcclxuICAgICAgICAgICAgICBvcHRpb25zPzogYW55O1xyXG4gICAgICAgICAgICB9KSA9PiBzdXBhYmFzZVJlc3BvbnNlLmNvb2tpZXMuc2V0KG5hbWUsIHZhbHVlLCBvcHRpb25zKSxcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgKTtcclxuXHJcbiAgY29uc3Qge1xyXG4gICAgZGF0YTogeyB1c2VyIH0sXHJcbiAgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpO1xyXG5cclxuICBjb25zdCBpc0Rhc2hib2FyZFJvdXRlID1cclxuICAgIHJlcXVlc3QubmV4dFVybC5wYXRobmFtZS5zdGFydHNXaXRoKFwiL2Rhc2hib2FyZFwiKSB8fFxyXG4gICAgcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgoXCIvdmVoaWNsZXNcIikgfHxcclxuICAgIHJlcXVlc3QubmV4dFVybC5wYXRobmFtZS5zdGFydHNXaXRoKFwiL3RyaXBzXCIpIHx8XHJcbiAgICByZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUuc3RhcnRzV2l0aChcIi9tYWludGVuYW5jZVwiKSB8fFxyXG4gICAgcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgoXCIvZXhwZW5zZXNcIikgfHxcclxuICAgIHJlcXVlc3QubmV4dFVybC5wYXRobmFtZS5zdGFydHNXaXRoKFwiL2RyaXZlcnNcIikgfHxcclxuICAgIHJlcXVlc3QubmV4dFVybC5wYXRobmFtZS5zdGFydHNXaXRoKFwiL2FuYWx5dGljc1wiKTtcclxuXHJcbiAgaWYgKCF1c2VyICYmIGlzRGFzaGJvYXJkUm91dGUpIHtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTChcIi9sb2dpblwiLCByZXF1ZXN0LnVybCkpO1xyXG4gIH1cclxuXHJcbiAgaWYgKHVzZXIgJiYgcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lID09PSBcIi9sb2dpblwiKSB7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoXCIvZGFzaGJvYXJkXCIsIHJlcXVlc3QudXJsKSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gc3VwYWJhc2VSZXNwb25zZTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBtYXRjaGVyOiBbXCIvKCg/IV9uZXh0L3N0YXRpY3xfbmV4dC9pbWFnZXxmYXZpY29uLmljb3xhcGkpLiopXCJdLFxyXG59O1xyXG4iXSwibmFtZXMiOlsiY3JlYXRlU2VydmVyQ2xpZW50IiwiTmV4dFJlc3BvbnNlIiwibWlkZGxld2FyZSIsInJlcXVlc3QiLCJzdXBhYmFzZVJlc3BvbnNlIiwibmV4dCIsInN1cGFiYXNlIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiY29va2llcyIsImdldEFsbCIsInNldEFsbCIsImNvb2tpZXNUb1NldCIsImZvckVhY2giLCJuYW1lIiwidmFsdWUiLCJzZXQiLCJvcHRpb25zIiwiZGF0YSIsInVzZXIiLCJhdXRoIiwiZ2V0VXNlciIsImlzRGFzaGJvYXJkUm91dGUiLCJuZXh0VXJsIiwicGF0aG5hbWUiLCJzdGFydHNXaXRoIiwicmVkaXJlY3QiLCJVUkwiLCJ1cmwiLCJjb25maWciLCJtYXRjaGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/./src/middleware.ts\n");

/***/ })

});